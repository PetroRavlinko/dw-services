language: java
jdk:
  - oraclejdk8
script:
  - "./gradlew clean"
  - "./gradlew test"
  - "./gradlew jacocoTestReport"
  - "./gradlew build"
  - sonar-scanner -Dsonar.login=$SONAR_TOKEN -Dsonar.projectVersion=$DW_VERSION.$TRAVIS_BUILD_NUMBER
  - "./gradlew bintrayUpload"
  - docker login -u$DOCKER_USER -p$DOCKER_SECRET
  - docker build -t ravlinko/dw-services:$DW_VERSION.$TRAVIS_BUILD_NUMBER -t ravlinko/dw-services:latest .
  - docker push ravlinko/dw-services
addons:
  sonarqube: true
services:
  - docker
cache:
  directories:
    - $HOME/.gradle/caches/
env:
  global:
  - DW_VERSION="1.1"
  - secure: guk3qVsqpd0FtciNOiyHiGtyDSHxLFf83tn591CEUON6QxFH7RIdN5DdQpgj9yvNI72cic5XQVbgXBRbdxMX1hmz39iqoz0fDlnDtxywCilu+bg2CoJpa/38BnflGkg8W8LRqxp5V2LzUUt4RqzGsi2Pg2GTgc2HNPh5dwMX+YXC4rY30mi7ZN2q8JxPLA0m7+Tmx3vxw1/omgE7h4ga3qeXUbsso9PaNVGrGBu8L4ZmbFVg8tLZKnycp+exW9Vk/OrQaxPDOqsCwZ4EHRlc/8kcBtODu4RdQS+UBwDZukYomIN3UwcjT3fPdbLTfLLnOCgXBUCFnpUlbcMudV8AgHOq0xmXeaOrAgzMFq2osu3RYh4XLEWTqKKOPo7uzN0XdjcXCtv3u79+LlCVhVrRGdiOqz7Ftd+dnEzYXWsVaCyPKYqwbRh8QuKOF2aDQO+eTVVWyHEmaI4SDT9e2WdP0XAd9omoESMi5A66P/hfdXurVU9OebBcLdv0jEzUQ3uJZRKXf4dlieM/+pEG4N6L8q+Y2CqiGz/A2rn3fbCAHoGTN7ftKnKUZpbMss0mN4O+mSdm364Zby2onok/G4kJgGB+alMgFR+IJgQIUCNn1P7l1ubV/LE9xWn0kVqiQAN8mCHnw2eNTVNEf3GE0btiPQTYlMsvDpBpr6uU+lBhsc0=
  - secure: VXz8dxi4Bnev6837dRrn1InxhqGZcNw3PIQBL5bG9GIjWqw1ezMvMRvvpJdFzlRlZRMlWSwvXhpg7HQ1s4oM6yvSpmiFNnWSSVA6C9yofi6XwQUsGpfFyLpVahTnHWCtc+U3+00duTUpuryqACTqjEXs59SLSAsFDOi5PUp2q7VsLrmyJxlPZuQHA03R7ZieiHK5XNQ+M04rLqJ9dKU/XmVGNv7CADgu0R13ivQKCTjU1e8u/kQp7oyo+s1x3d3+yusQLdS/AbwJ1/Fh/iFfy7XVYPhynp+cNtNlK7sbOKGnkyF6qPiF+UIYbrYzuJgek46Cp71VS5JdbMYGdv/ZpOfgpDR+k487/SRm5Nl20si4XmNtojIc22xsZ36mylQBl7L5eEvfWVHN5medjURch2WlORHbM2ED0p3Aa7scttZp0boC4yLWABExXtu4OuBPacyudSHCNrJcWkrAI996qIKfBL8BhjTdHTH4qs9Bs0JRx/ClaJFO0OhIF7k2V3H1ROZRt2xFc4e0KHj3mK4bmaExgNX1B1rPRTUJPFdZsYP8kndjMbzyvsyXbafxgCdkbkOUGtXLFxNFPPbb8GkhYKeYBXEpjmqAR9T7HwScV7XAMRuJJpeuFpLriuPTz5i/EclHfg0pLLvndUmm8WN18rs5gIe3sbj9zcmvBk+AU+w=
  - secure: g0DJeWci9QHfbzNBrURICTkSyIILXPCnkolA0CPkeBrGLcB1FPnlM+6BH2ptji9GYEwiRHaIudeJTwU0isFhVAuQU7+lzJ/ty3ht9oj0YdU04hhruaikUdBHv6M+XMDGLIJGNWkwkY9d2CZV2AGwrUKFlsdNks3iFogSIaPg5fLcUCKMYqTDC6J3Wl4QRHAvrywpp74LY2mb7Na6Bed7XMNXJeNFdnrso6kPWCqBuWcXnVmCK4JCfbAVZoceGGzRc7WcBYhgN5jw9LbyAEM5aY2tCfUljh3C0YbpoA9IelvekBn76H9BA3nORMDk5kxsx0wJvV3a8IkrOYZzNQr/G4J0sGlU7y/7+627f/HDRFxf32d7myzwclJWBkeP0O3u7Prgoq5G3NFNnnqOTJ5xrF3a9SvKvqFSRpq/Qb6cYXUwJMSZ8kqihIcrPyWlXWSt3iwlEkAWt5iCAk1v4Q2BExIr/ugqj1nOcTArr02Y06/MGNv4uvWO5E8OMdvvasGVEngZaimXFBgSEf6HkKF99mHsSCBg5YJ0hkexJLTID3Fkpf6+eixRusZURQ6/F5jfRP1nMnrVzxPceDf3T6Gcyrhu7ruGtcyIUa4Cu2G3xxw3vtkpnil5eZ5UmeNK2A24UQDDJzgU2IFUsA6a8kLv/2ghBeM3MTmv25iF9SwP5xc=
  - secure: kCLKjKw3jSBPZKc2EaFdqz57pCOHXW9sGj3esFaV77fnMFJgfw6j94BYLcp8MM46MC3YxRssPTtJ3y16Y27u3qt+SprkZiZXzH96MsDD6uNjgCeE47ygvCm7QZWtxhWMpzH39Oy3F75O5wLrd38LKVoB4Caz7ppqdgHPVPv+L2P9Wq7ZEfMUDHVIa9ZEbYmkmYn2bYZTJvl3k07tv3cZPNX9Zv5bbjiA+9b+9GIjR66KrL4w97/aLC7N7Gnkb+GHFQefQo2N57JlU7vdMJ7aheKe/8XZ8PzX6TuEgKYBa1/kiPp/r/GbtTTKzHO9IJA4L0SH+GbMqZ3joRhRHlahifXaH7uWzQQlZFifey+zKb7iAtEptSgUj7jJ5SLmJLCOb4K6K82NsMYoeJwYuTqawmHyGmQKSlHJ9J0Z28Vtb8Ld0yOHx+mb5r1t6Fp/U5obXTKIyF1o0yhZ+rFVlP/2hdulXbfQdVdi6NoZaFpr5pVTTK5BAbA8vpY6nS7xvLDmr40GuPT2fqQOJlwDxHV82Azd5Se/7QRJDXKIwGp7IJtTNaL1bygUV0ewZUm66spOzG/lz/pInCxMz9VLDB7THKCmPD6irSHzx1fCt1Tvs38Hp0Rp0OBIwwiet6igphk4Dru+1u2M+VrLAPg2rsv5vR/xuxmwdyYznw8wh3miUwA=
  - secure: T7d/L3ZMiGi8gombs2p33vnHk7OhQ8As38YNOqHwgmH0Zq/XZhtdWdHJ/B87spqsuZNwd9cU28mgHflcxpk2qIuyNz8Nw7QBsaxjZhd7C9aNeG2v1X1DChLj5tO9NrNOV5AGV6F5VWNxklEl2TyDVvbtCqfJmFQykJxE4q7uhf6g6KypB4qvS+DHjxBhm/a5gxGbovGu1ROkSTfzgl10S+YEI0cdGn4ETQmCcnjDk9L9502+o/9bpnu0zRqLhMmOC2rryRiExxAQiAfEv5Y7ReALYS73vWuL/xjP//1B5hDikhSxI0SZfaBDHcQ7XvZdTZifJGt2m671kBRlz/bZA0mWXR+8kreTNXs1jrn9xejD/4wkf7d4nmmgmYHzC/417/OfE8mt9/fwVM2CK/iirI8uEndtpJbK+rQoOrbur1bcF6fAj8oGocbwlUvOywP9flgdWzyYCSHxGIyA8KU0YBaGq3aKd+88S5wlr9g0lKlaroCVDArIBWT1vn0RjIC3KnhC4X9CyEOA3j9zYqhbSy6aLXN4q62e1+jIghENxcXgv9J6bGhrlgW3D2t3q7rRUbBDTWsv6hZXXxQ7fvNMQ2Y0S7XhAKYzqVWzDtLXu9MqVAXxzMyPGj2US0zjlYA4n0GVDN1g28Nnxo+YEXxA8GxPmonBF/C6x2l3ejeExZY=
